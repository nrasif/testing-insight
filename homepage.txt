# --- Definisikan dan Load CSS ---
ADVANCED_HOMEPAGE_CODE = """
<style>
    @import url('https://fonts.googleapis.com/css2?family=Radio+Canada:wght@400;500;600;700&display=swap');

    :root {
        --green-primary: #24b24c;
        --green-dark: #333;
        --text-dark: #1f2937;
        --text-light: #6b7280;
        --bg-light: #f8f9fa;
        --border-color: #e5e7eb;
    }

    html, body, [class*="css"] {
        font-family: 'Radio Canada', sans-serif;
    }

    /* Override Style Streamlit Dasar */
    .stApp {
        background: linear-gradient(180deg, var(--bg-light) 0%, rgba(36, 178, 76, 0.03) 70%, #ffffff 100%);
    }
    .main .block-container {
        padding: 0 !important;
    }
    
    [data-testid="stSidebar"] {
        display: none;
    }
    
    /* --- PERUBAHAN UTAMA: HAPUS SCROLL WRAPPER --- */
    /* .homepage-wrapper tidak lagi dibutuhkan untuk scroll, hanya sebagai container biasa */
    .homepage-container {
        width: 100%;
    }

    /* Tiap section sekarang punya padding sendiri, tidak lagi dipaksa 100vh */
    .homepage-container > section {
        width: 100%;
        padding: 6rem 1.5rem; /* Padding atas-bawah yang lega */
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Hero Section (Terasa Full-Screen dengan Padding Besar) */
    .hero-section {
        min-height: 70vh; /* Dibuat hampir setinggi layar untuk kesan "full screen" */
        justify-content: center;
        align-items: center;
        text-align: center;
        padding-top: 0;
        margin-bottom: 5rem;
    }
    .hero-section .title {
        font-size: 4rem;
        font-weight: 700;
        margin-bottom: 1rem;
        line-height: 1.2;
    }
    .hero-section .green_text { color: var(--green-primary); }
    .hero-section .black_text { color: var(--green-dark); }
    .hero-section .tagline {
        font-size: 1.2rem;
        color: var(--text-light);
        max-width: 600px;
        margin: 0 auto 2.5rem auto;
    }
    
    .strikethrough-e {
        position: relative;
        display: inline-block;
        color: var(--text-dark); /* warna huruf tetap */
    }

    .strikethrough-e::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        height: 5px;
        background-color: var(--green-primary); /* warna garis coret */
        transform: translateY(-50%);
    }

    /* --- PERUBAHAN UTAMA: Tombol CTA Dikecilkan --- */
    .hero-section .cta-button {
        display: inline-block;
        background-color: var(--green-primary);
        color: white;
        width: 250px;
        padding: 12px 28px; /* Padding dikecilkan */
        border-radius: 8px;
        font-size: 1.2rem; /* Font size dikecilkan */
        font-weight: 600;
        text-decoration: none;
        transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .hero-section .cta-button:hover {
        background-color: #1e9a41;
        transform: translateY(-2px);
    }

    /* Modern Feature Section */
    .modern-features-section {
        background: transparent;
        padding-top: 8rem; /* Jarak lebih besar dari atas */
    }
    .section-title-wrapper {
        text-align: center;
        max-width: 700px;
        margin: 0 auto 4rem auto;
    }
    .section-title {
        font-size: 2.8rem;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 1rem;
    }
    .section-subtitle {
        font-size: 1.1rem;
        color: var(--text-light);
        line-height: 1.7;
    }
    
    /* Grid untuk layout asimetris */
    .features-grid-container {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        gap: 2rem;
    }
    .grid-row {
        display: grid;
        gap: 2rem;
        align-items: stretch;
    }
    .grid-row-1 { grid-template-columns: 1fr 1.5fr; }
    .grid-row-2 { grid-template-columns: 1.5fr 1fr; }

    .modern-feature-card {
        background-color: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        padding: 2.5rem;
        border-radius: 20px;
        border: 1px solid rgba(0,0,0,0.05);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        display: flex;
        flex-direction: column;
    }
    .modern-feature-card h3 {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-dark);
        margin-top: 0;
        margin-bottom: 0.75rem;
    }
    .modern-feature-card p {
        color: var(--text-light);
        line-height: 1.6;
        font-size: 1rem;
        margin-bottom: 1.5rem;
        flex-grow: 1;
    }
    .modern-feature-card .image-container {
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--border-color);
    }
    .modern-feature-card img {
        width: 100%; height: auto; display: block;
    }
    
    /* FAQ Section Styling */
    .faq-section {
        padding-bottom: 6rem;
    }
    .faq-container {
        max-width: 900px;
        margin: 0 auto;
    }
    div[data-testid="stExpander"] {
        background-color: transparent;
        border: 1px solid var(--border-color);
        border-radius: 10px;
        margin-bottom: 1rem;
    }
    div[data-testid="stExpander"] > div[role="button"] {
        padding-top: 1.2rem;
        padding-bottom: 1.2rem;
    }
    div[data-testid="stExpander"] p {
        font-size: 1rem;
        line-height: 1.7;
    }
    
    /* Footer */
    .footer {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--text-light);
        font-size: 0.9em;
    }

    /* Animasi CSS "Fade In on Load" */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .hero-section, .modern-features-section, .faq-section, .footer {
        animation: fadeIn 1s ease-out forwards;
    }
    
    /* Responsif untuk mobile */
    @media (max-width: 768px) {
        .grid-row-1, .grid-row-2 {
            grid-template-columns: 1fr; /* Di mobile, semua jadi satu kolom */
        }
        .hero-section .title { font-size: 2.5rem; }
        .section-title { font-size: 2rem; }
        .feature-text h3 { font-size: 1.8rem; }
    }
</style>
"""

st.markdown(ADVANCED_HOMEPAGE_CODE, unsafe_allow_html=True)


# --- KONTEN UTAMA HOMEPAGE ---
def inject_custom_css():
    st.markdown("""
    <style>
        /* 1. Atur card dasarnya dan kasih transisi biar alus */
        .modern-feature-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            /* box-shadow opsional, tapi bikin efeknya lebih keren */
        }

        /* 2. EFEKNYA: Pas card di-hover, dia membesar dan bayangannya lebih jelas */
        .modern-feature-card:hover {
            transform: scale(1.05); /* Zoom 105%. Card-nya yang nge-zoom */
            box-shadow: 0px 8px 25px rgba(0,0,0,0.15); /* Bayangan biar keliatan ngangkat */
            z-index: 10; /* Biar dia tampil di atas card lain, gak ketutupan */
        }
        
        /* Pastikan container gridnya gak motong bayangan */
        .features-grid-container {
            overflow: visible;
        }

    </style>
    """, unsafe_allow_html=True)

def render_homepage():
    # --- Siapkan gambar-gambar fitur ---
    img_better_view = get_image_as_base64("assets/pic2.png")
    img_qa_llm = get_image_as_base64("assets/testinginsight.png")
    img_analytics = get_image_as_base64("assets/testinginsight.png")
    img_offline_mode = get_image_as_base64("assets/testinginsight.png") # Gambar baru

    homepage_html = f"""
    <div class="homepage-container">
        
        <!-- Layar 1: Hero Section -->
        <section class="hero-section">
        <h1 class="title">
            <span class="green_text">IntipinJira</span>
            <br>
            <span class="black_text">Accessing Jira Mad<span class="strikethrough-e">e</span> Simple</span>
        </h1>
            <p class="tagline">
                See, analyze, and understand your Jira tickets anytime, anywhere.
                simplified filtering, better views, and AI-powered insights
            </p>
            <a href="/JIRA_Tickets" target="_self" class="cta-button">
                Start Intipin Jira
            </a>
        </section>

        <!-- Layar 2: Fitur Utama (Layout Asimetris) -->
        <section class="modern-features-section">
            <div class="section-title-wrapper">
                <h2 class="section-title">Features</h2>
                <p class="section-subtitle">Built for BSI's DBR team — IntipinJira simplifies ticket workflows and testing analysis for Product Owners and QA, powered by AI</p>
            </div>

            <div class="features-grid-container">
                <!-- Baris Pertama: Kecil di kiri, Besar di kanan -->
                <div class="grid-row grid-row-1">
                    <div class="modern-feature-card">
                        <h3>Access Jira without Intranet</h3>
                        <p>At home, on the go, or without Intra access —IntipinJira lets you view Jira tickets instantly. No intranet. Just fast and easy access. Also, supported on mobile devices.</p>
                        <div class="image-container">
                            <img src="data:image/png;base64,{img_offline_mode}" alt="Offline Mode & Security" style="border: none;">
                        </div>
                    </div>
                    <div class="modern-feature-card">
                        <h3>A better Ticket Viewing</h3>
                        <p>Designed to help Product Owners and QA teams easily monitor tickets through simplified filters, progress tracking, and detailed insights for analyzing each product feature.</p>
                        <div class="image-container">
                            <img src="data:image/png;base64,{img_better_view}" alt="Better Jira View" style="border: none;">
                        </div>
                    </div>
                </div>

                <!-- Baris Kedua: Besar di kiri, Kecil di kanan -->
                <div class="grid-row grid-row-2">
                    <div class="modern-feature-card">
                        <h3>Your AI-Powered QA Assistant</h3>
                        <p>Ask anything about your tickets or BA documents. Get summaries, risk analysis, or even auto-generated test scripts — all with the help of our intelligent AI powered by LLM-RAG. (Coming Soon)</p>
                         <div class="image-container">
                            <img src="data:image/png;base64,{img_qa_llm}" alt="JIRA QA LLM">
                        </div>
                    </div>
                     <div class="modern-feature-card">
                        <h3>Deep Analytics</h3>
                        <p>Interactive charts. Smarter insights. Better decisions. (Coming Soon)</p>
                         <div class="image-container">
                            <img src="data:image/png;base64,{img_analytics}" alt="Testing Analytics">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Layar 3: FAQ -->
        <section class="faq-section">
            <!-- Judul FAQ akan dirender oleh Streamlit di bawah -->
        </section>
        
    </div>
    """
    st.html(homepage_html)

# --- BAGIAN FAQ dengan st.expander ---
def render_faq():
    # Gunakan kolom agar bisa mengatur lebar expander
    with st.container():
        st.markdown("""
        <div class="faq-container">
            <div class="section-title-wrapper">
                <h2 class="section-title">Frequently Asked Question</h2>
            </div>
        </div>
        """, unsafe_allow_html=True)
        _, mid_col, _ = st.columns([1,3,1])
        with mid_col:
            with st.expander("What is IntipinJira?"):
                st.write("""
                IntipinJira is an alternative Jira web app designed to help QA (Quality Assurance) teams and Product Owners view and analyze Jira tickets more easily, quickly, and intuitively — even on mobile devices, with deeper and more detailed data.
                """)
            with st.expander("Do you need intra WiFi to access this?"):
                st.write("""
                Nope — Intra’s not needed. All Jira data is preloaded and processed in advance, so you can view it through IntipinJira without having to be connected to the office network.
                """)
            with st.expander("Is it realtime?"):
                st.write("""
                Real-time access is not available due to network restrictions. Jira data is retrieved through the office intranet, then processed and visualized using Streamlit to enable flexible access outside the network.
                """)
            with st.expander("How do I get started?"):
                st.write("""
                Just click the "Start Ngintip Jira" button on the homepage.
                """)

# --- BAGIAN Footer ---
def render_footer():
    st.markdown("""
    <div class="homepage-container footer">
        <p>Made with ❤️ by Nahari Rasif<br>IntipinJira &copy; 2025</p>
    </div>
    """, unsafe_allow_html=True)

inject_custom_css()

# --- Panggil Semua Fungsi untuk Merender Homepage ---
render_homepage()
render_faq()
render_footer()
